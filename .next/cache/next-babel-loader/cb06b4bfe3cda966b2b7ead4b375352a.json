{"ast":null,"code":"import { loremIpsum } from 'lorem-ipsum';\nimport { name } from './Names';\n\nvar makeComment = function makeComment() {\n  return {\n    author: name(),\n    message: loremIpsum({\n      count: ~~(Math.random() * 3)\n    }),\n    time: new Date()\n  };\n};\n\nexport var makeComments = function makeComments(count) {\n  var comments = [];\n\n  for (var i = 0; i < count; i++) {\n    comments.push(makeComment());\n  }\n\n  return comments;\n};\nexport var createDupeComment = function createDupeComment() {\n  var comment = {\n    author: 'Fred Choe',\n    message: 'If a comment has a unique author and message it will not be considered a duplicate comment',\n    time: new Date()\n  };\n  return comment;\n};\nvar keepGoing = true; // clicking the unfollow button takes us out of the subscribe callback loop by modyfing value of keepGoing\n\nexport var stopFollow = function stopFollow() {\n  keepGoing = false;\n}; // clicking the follow button puts us back into the callback loop by modyfing value of keepGoing\n\nexport var startFollow = function startFollow() {\n  keepGoing = true;\n};\nexport var subscribe = function subscribe(callback) {\n  console.log('subscribing');\n\n  var produce = function produce() {\n    // if keepGoing is falsy, jump out of the callback loop\n    if (!keepGoing) {\n      console.log('stopped inside produce');\n      return;\n    }\n\n    callback(makeComment());\n    var interval = Math.random() * 5000 + 2000;\n    console.log('next comment in:', interval);\n    setTimeout(produce, interval);\n  };\n\n  setTimeout(produce, 3000);\n};","map":{"version":3,"sources":["/Users/frederickchoe/Projects/React/web-kokanee-fred-choe/models/Comment.ts"],"names":["loremIpsum","name","makeComment","author","message","count","Math","random","time","Date","makeComments","comments","i","push","createDupeComment","comment","keepGoing","stopFollow","startFollow","subscribe","callback","console","log","produce","interval","setTimeout"],"mappings":"AAAA,SAASA,UAAT,QAA2B,aAA3B;AACA,SAASC,IAAT,QAAqB,SAArB;;AAQA,IAAMC,WAAW,GAAG,SAAdA,WAAc;AAAA,SAAgB;AAClCC,IAAAA,MAAM,EAAEF,IAAI,EADsB;AAElCG,IAAAA,OAAO,EAAEJ,UAAU,CAAC;AAAEK,MAAAA,KAAK,EAAE,CAAC,EAAEC,IAAI,CAACC,MAAL,KAAgB,CAAlB;AAAV,KAAD,CAFe;AAGlCC,IAAAA,IAAI,EAAE,IAAIC,IAAJ;AAH4B,GAAhB;AAAA,CAApB;;AAMA,OAAO,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAACL,KAAD,EAAmB;AAC7C,MAAMM,QAAQ,GAAG,EAAjB;;AAEA,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGP,KAApB,EAA2BO,CAAC,EAA5B,EAAgC;AAC9BD,IAAAA,QAAQ,CAACE,IAAT,CAAcX,WAAW,EAAzB;AACD;;AAED,SAAOS,QAAP;AACD,CARM;AAUP,OAAO,IAAMG,iBAAiB,GAAG,SAApBA,iBAAoB,GAAe;AAC9C,MAAMC,OAAO,GAAG;AACdZ,IAAAA,MAAM,EAAE,WADM;AAEdC,IAAAA,OAAO,EAAE,4FAFK;AAGdI,IAAAA,IAAI,EAAE,IAAIC,IAAJ;AAHQ,GAAhB;AAMA,SAAOM,OAAP;AACD,CARM;AAUP,IAAIC,SAAS,GAAG,IAAhB,C,CAEA;;AACA,OAAO,IAAMC,UAAU,GAAG,SAAbA,UAAa,GAAM;AAC9BD,EAAAA,SAAS,GAAG,KAAZ;AACD,CAFM,C,CAIP;;AACA,OAAO,IAAME,WAAW,GAAG,SAAdA,WAAc,GAAM;AAC/BF,EAAAA,SAAS,GAAG,IAAZ;AACD,CAFM;AAIP,OAAO,IAAMG,SAAS,GAAG,SAAZA,SAAY,CAACC,QAAD,EAA0C;AAC/DC,EAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ;;AAEA,MAAMC,OAAO,GAAG,SAAVA,OAAU,GAAM;AAEpB;AACA,QAAG,CAACP,SAAJ,EAAe;AACbK,MAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ;AACA;AACD;;AAEDF,IAAAA,QAAQ,CAAClB,WAAW,EAAZ,CAAR;AACA,QAAMsB,QAAQ,GAAGlB,IAAI,CAACC,MAAL,KAAgB,IAAhB,GAAuB,IAAxC;AACAc,IAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCE,QAAhC;AACAC,IAAAA,UAAU,CAACF,OAAD,EAAUC,QAAV,CAAV;AACD,GAZD;;AAcAC,EAAAA,UAAU,CAACF,OAAD,EAAU,IAAV,CAAV;AACH,CAlBM","sourcesContent":["import { loremIpsum } from 'lorem-ipsum'\nimport { name } from './Names'\n\nexport interface Comment {\n  author: string\n  message: string\n  time: Date\n}\n\nconst makeComment = (): Comment => ({\n  author: name(),\n  message: loremIpsum({ count: ~~(Math.random() * 3) }),\n  time: new Date()\n})\n\nexport const makeComments = (count: number) => {\n  const comments = []\n\n  for (let i = 0; i < count; i++) {\n    comments.push(makeComment())\n  }\n\n  return comments\n}\n\nexport const createDupeComment = (): Comment => {\n  const comment = {\n    author: 'Fred Choe',\n    message: 'If a comment has a unique author and message it will not be considered a duplicate comment',\n    time: new Date()\n  }\n\n  return comment\n}\n\nvar keepGoing = true\n\n// clicking the unfollow button takes us out of the subscribe callback loop by modyfing value of keepGoing\nexport const stopFollow = () => {\n  keepGoing = false\n}\n\n// clicking the follow button puts us back into the callback loop by modyfing value of keepGoing\nexport const startFollow = () => {\n  keepGoing = true\n}\n\nexport const subscribe = (callback: (comment: Comment) => void) => {\n    console.log('subscribing')\n\n    const produce = () => {\n\n      // if keepGoing is falsy, jump out of the callback loop\n      if(!keepGoing) {\n        console.log('stopped inside produce')\n        return\n      }\n\n      callback(makeComment())\n      const interval = Math.random() * 5000 + 2000\n      console.log('next comment in:', interval)\n      setTimeout(produce, interval)\n    }\n\n    setTimeout(produce, 3000)\n}\n"]},"metadata":{},"sourceType":"module"}