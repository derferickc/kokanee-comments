{"ast":null,"code":"var _jsxFileName = \"/Users/frederickchoe/Projects/React/web-kokanee-fred-choe/components/CommentListClass.js\";\nvar __jsx = React.createElement;\nimport React, { Component } from \"react\";\nimport { subscribe, stopFollow, startFollow, createDupeComment } from '../models/Comment';\nimport { Theme, Typography } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { FixedSizeList as List } from 'react-window';\nimport Button from '@material-ui/core/Button';\nimport AutoSizer from \"react-virtualized-auto-sizer\";\nimport Comment from \"./Comment\";\nconst useStyles = makeStyles(theme => ({\n  individualComment: {\n    outline: '1px solid black'\n  }\n}));\n\nclass CommentList extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      comments: [],\n      follow: true\n    };\n    this.handleFollow = this.handleFollow.bind(this);\n    this.addCustomComment = this.addCustomComment.bind(this);\n    this.handleDupeCheck = this.handleDupeCheck.bind(this);\n  }\n\n  componentDidMount() {\n    this.setState({\n      comments: this.props.initialComments\n    });\n  }\n\n  componentDidUpdate() {\n    subscribe(comment => {\n      const dupeCheck = this.handleDupeCheck(comment);\n\n      if (dupeCheck === -1) {\n        this.setState({\n          comments: [...this.state.comments, comment]\n        });\n      }\n\n      console.log('received comment: ', comment);\n    });\n  } // method to handle follow / unfollow clicks\n\n\n  handleFollow() {\n    if (this.state.follow) {\n      stopFollow();\n    } else {\n      startFollow();\n    }\n\n    this.setState({\n      follow: !this.state.follow\n    });\n  } // method to add a controlled comment in order to test for dupe handling\n\n\n  addCustomComment() {\n    const comment = createDupeComment();\n    const dupeCheck = this.handleDupeCheck(comment); // if -1, comment is unique and is added to state\n\n    if (dupeCheck === -1) {\n      this.setState({\n        comments: [...this.state.comments, comment]\n      });\n    }\n  } // method to check if the current comment already exists in the state (returns index or -1)\n\n\n  handleDupeCheck(val) {\n    const indexOfComment = this.state.comments.findIndex(comment => comment.author === val.author && comment.message === val.message);\n    return indexOfComment;\n  }\n\n  render() {\n    const classes = useStyles();\n    const {\n      comments,\n      follow\n    } = this.state; // Comment component loaded for each index in comments variable\n\n    const commentReactWindow = ({\n      index,\n      style\n    }) => __jsx(\"div\", {\n      style: style,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, __jsx(Comment, {\n      comment: comments[index],\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }));\n\n    const instructions = {\n      textAlign: 'center'\n    };\n    const inlineBlock = {\n      display: 'inline-block',\n      textAlign: 'center',\n      width: '100%'\n    };\n    const followButton = {\n      display: 'inline-block',\n      marginRight: '5px'\n    };\n    const customButton = {\n      display: 'inline-block',\n      marginLeft: '5px'\n    };\n    return __jsx(\"div\", {\n      className: \"commentlist-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      className: \"buttons-container\",\n      style: inlineBlock,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      className: \"follow-button-container\",\n      style: followButton,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, follow == true ? __jsx(Button, {\n      variant: \"contained\",\n      color: \"primary\",\n      onClick: this.handleFollow,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, \"Unfollow\") : __jsx(Button, {\n      variant: \"contained\",\n      color: \"secondary\",\n      onClick: this.handleFollow,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, \"Follow\")), __jsx(\"div\", {\n      className: \"addcustom-comment-button\",\n      style: customButton,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, __jsx(Button, {\n      variant: \"contained\",\n      color: \"primary\",\n      onClick: this.addCustomComment,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, \"Add Custom Comment\"))), __jsx(\"div\", {\n      className: \"instructions\",\n      style: instructions,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, __jsx(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, \"To 'pause' the incoming stream of comments please click the 'Unfollow' button.\"), __jsx(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, \"In order continue receiving glowing reviews and comments, please click the 'Follow' button.\"), __jsx(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, __jsx(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, \"Total Comments: \", comments.length))), __jsx(\"div\", {\n      style: {\n        display: 'flex'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      style: {\n        flex: '1 1 auto',\n        height: '50vh'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, __jsx(AutoSizer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, ({\n      height,\n      width\n    }) => __jsx(List, {\n      height: height,\n      width: width,\n      itemSize: 125,\n      itemCount: comments.length,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, commentReactWindow)))));\n  }\n\n}\n\nexport default CommentList;","map":{"version":3,"sources":["/Users/frederickchoe/Projects/React/web-kokanee-fred-choe/components/CommentListClass.js"],"names":["React","Component","subscribe","stopFollow","startFollow","createDupeComment","Theme","Typography","makeStyles","FixedSizeList","List","Button","AutoSizer","Comment","useStyles","theme","individualComment","outline","CommentList","constructor","props","state","comments","follow","handleFollow","bind","addCustomComment","handleDupeCheck","componentDidMount","setState","initialComments","componentDidUpdate","comment","dupeCheck","console","log","val","indexOfComment","findIndex","author","message","render","classes","commentReactWindow","index","style","instructions","textAlign","inlineBlock","display","width","followButton","marginRight","customButton","marginLeft","length","flex","height"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\"\nimport { subscribe, stopFollow, startFollow, createDupeComment } from '../models/Comment'\nimport { Theme, Typography } from '@material-ui/core'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { FixedSizeList as List } from 'react-window';\nimport Button from '@material-ui/core/Button';\nimport AutoSizer from \"react-virtualized-auto-sizer\";\nimport Comment from \"./Comment\"\n\nconst useStyles = makeStyles(theme => ({\n  individualComment: {\n    outline: '1px solid black'\n  }\n}));\n\nclass CommentList extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      comments: [],\n      follow: true\n    }\n\n    this.handleFollow = this.handleFollow.bind(this)\n    this.addCustomComment = this.addCustomComment.bind(this)\n    this.handleDupeCheck = this.handleDupeCheck.bind(this)\n  }\n\n  componentDidMount() {\n    this.setState({\n      comments: this.props.initialComments\n    })\n  }\n\n  componentDidUpdate() {\n    subscribe(comment => {\n      const dupeCheck = this.handleDupeCheck(comment)\n      if(dupeCheck === -1) {\n        this.setState({\n          comments: [...this.state.comments, comment]\n        })\n      }\n      console.log('received comment: ', comment)\n    })\n  }\n\n  // method to handle follow / unfollow clicks\n  handleFollow() {\n    if(this.state.follow) {\n      stopFollow()\n    } else {\n      startFollow()\n    }\n\n    this.setState({\n      follow: !this.state.follow\n    })\n  }\n\n  // method to add a controlled comment in order to test for dupe handling\n  addCustomComment() {\n    const comment = createDupeComment()\n    const dupeCheck = this.handleDupeCheck(comment)\n\n    // if -1, comment is unique and is added to state\n    if(dupeCheck === -1) {\n      this.setState({\n        comments: [...this.state.comments, comment]\n      })\n    }\n  }\n\n  // method to check if the current comment already exists in the state (returns index or -1)\n  handleDupeCheck(val) {\n    const indexOfComment = this.state.comments.findIndex((comment) => (comment.author === val.author) && (comment.message === val.message))\n\n    return indexOfComment\n  }\n\n  render() {\n    const classes = useStyles();\n    \n    const { comments, follow } = this.state\n\n    // Comment component loaded for each index in comments variable\n    const commentReactWindow = ({ index, style }) => (\n      <div style={style}>\n          <Comment comment={comments[index]} key={index}/>\n      </div>\n    )\n\n    const instructions = {\n      textAlign: 'center'\n    }\n    const inlineBlock = {\n      display: 'inline-block',\n      textAlign: 'center',\n      width: '100%'\n    }\n    const followButton = {\n      display: 'inline-block',\n      marginRight: '5px'\n    }\n    const customButton = {\n      display: 'inline-block',\n      marginLeft: '5px'\n    }\n\n    return (\n      <div className=\"commentlist-container\">\n\n        <div className=\"buttons-container\" style={inlineBlock}>\n          <div className=\"follow-button-container\" style={followButton}>\n              {follow == true\n                ? <Button\n                    variant=\"contained\"\n                    color=\"primary\"\n                    onClick={this.handleFollow}>\n                    Unfollow</Button>\n                : <Button\n                    variant=\"contained\"\n                    color=\"secondary\"\n                    onClick={this.handleFollow}>\n                    Follow</Button>\n              }\n          </div>\n\n          <div className=\"addcustom-comment-button\" style={customButton}>\n            <Button \n              variant=\"contained\"\n              color=\"primary\"\n              onClick={this.addCustomComment}>\n              Add Custom Comment</Button>\n          </div>\n        </div>\n\n        <div className=\"instructions\" style={instructions}>\n          <p>To 'pause' the incoming stream of comments please click the 'Unfollow' button.</p>\n          <p>In order continue receiving glowing reviews and comments, please click the 'Follow' button.</p>\n          <p><strong>Total Comments: {comments.length}</strong></p>\n        </div>\n\n        \n\n        <div style={{ display: 'flex' }}>\n          <div style={{ flex: '1 1 auto' , height: '50vh'}}>\n            <AutoSizer>\n              {({ height, width }) => (\n                <List\n                  height={height}\n                  width={width}\n                  itemSize={125}\n                  itemCount={comments.length}\n                >\n                  {commentReactWindow}\n                </List>\n              )}\n            </AutoSizer>\n          </div>\n        </div>\n\n      {/*\n      {comments.map((comment, index) => (\n        <Comment comment={comment} key={index}/>\n      ))}\n      */}\n      </div>\n    )\n  }\n}\n \nexport default CommentList"]},"metadata":{},"sourceType":"module"}